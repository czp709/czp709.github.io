"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[460,680],{1680:function(e,l,t){t.r(l),t.d(l,{default:function(){return u}});var a=function(){var e=this,l=e._self._c;return l("el-dialog",{attrs:{title:"详细信息",visible:e.dialogVisible,width:"50%",top:"10vh"},on:{"update:visible":function(l){e.dialogVisible=l},close:e.close}},[l("div",{staticClass:"box"},e._l(e.columns,(function(t){return l("div",{key:t.key,staticClass:"item"},[l("div",{staticClass:"label"},[e._v(e._s(t.label)+" :")]),l("div",{staticClass:"content"},[e.useJsonViewer(t.key)?l("json-viewer",{attrs:{value:e._f("jsonParse")(e.data[t.key]),"expand-depth":5,copyable:"",boxed:""}}):l("span",[e._v(e._s(e.data[t.key]))])],1)])})),0)])},s=[],o={name:"LogDetail",filters:{jsonParse(e){return JSON.parse(e)}},data(){return{dialogVisible:!1,columns:[],data:{}}},methods:{show(e,l){this.dialogVisible=!0,this.data=e,l.splice(0,1),this.columns=l},useJsonViewer(e){return"result"==e||"query"==e||"body"==e},close(){this.data={},this.columns=[]}}},i=o,n=t(1001),r=(0,n.Z)(i,a,s,!1,null,"3f3288a2",null),u=r.exports},460:function(e,l,t){t.r(l),t.d(l,{default:function(){return m}});var a=function(){var e=this,l=e._self._c;return l("div",{staticClass:"page"},[l("el-tabs",{model:{value:e.activeName,callback:function(l){e.activeName=l},expression:"activeName"}},[l("el-tab-pane",{attrs:{label:"登录日志",name:"loginLog"}},["loginLog"===e.activeName?l("TablePage",{ref:"tablePage",attrs:{columns:e.columns,filters:e.filters,options:e.options}}):e._e()],1),l("el-tab-pane",{attrs:{label:"全部日志",name:"allLog"}},["allLog"===e.activeName?l("TablePage",{ref:"tablePage",attrs:{columns:e.allLogColumns,filters:e.allLogFilters,options:e.allLogOptions,rowActionButton:e.rowActionButton}}):e._e()],1)],1),l("LogDetail",{ref:"LogDetail"})],1)},s=[],o=t(4471),i=t(7873);function n(e){return(0,o.Z)({url:i.Z.api+"/loginfo/loginLog",method:"get",params:e})}function r(e){return(0,o.Z)({url:i.Z.api+"/loginfo/allLog",method:"get",params:e})}var u=t(1680),b={name:"LogData",components:{LogDetail:u["default"]},data(){return{activeName:"loginLog"}},computed:{options(){return{apiFunc:n,hideActionBtn:!0}},columns(){this.$createElement;return[{type:"index",label:"序号",width:"50"},{key:"info_id",label:"日志ID"},{key:"username",label:"登录账号"},{key:"ip",label:"IP"},{key:"status",label:"状态",render:(e,l)=>e("span",[0==l.row.status?"成功":"失败"])},{key:"msg",label:"详细信息"},{key:"login_time",label:"登陆时间"}]},filters(){this.$createElement;return[{key:"username",label:"账号"},{key:"ip",label:"IP"},{key:"status",label:"状态",render:(e,l)=>e("el-select",{style:"width:100%",attrs:{placeholder:"请选择",clearable:!0},model:{value:l.status,callback:e=>{this.$set(l,"status",e)}}},[e("el-option",{key:"0",attrs:{label:"成功",value:"0"}}),e("el-option",{key:"1",attrs:{label:"失败",value:"1"}})])}]},allLogOptions(){return{apiFunc:r}},allLogColumns(){this.$createElement;return[{type:"index",label:"序号",width:"50"},{key:"oper_id",label:"日志ID"},{key:"username",label:"登录账号"},{key:"ip",label:"IP"},{key:"method",label:"请求方法"},{key:"url",label:"请求地址"},{key:"query",label:"query"},{key:"body",label:"body"},{key:"result",label:"返回结果"},{key:"status",label:"状态",render:(e,l)=>e("span",[0==l.row.status?"成功":"失败"])},{key:"msg",label:"详细信息"},{key:"use_time",label:"耗时（ms）"},{key:"request_time",label:"时间"}]},allLogFilters(){this.$createElement;return[{key:"username",label:"账号"},{key:"ip",label:"IP"},{key:"status",label:"状态",render:(e,l)=>e("el-select",{style:"width:100%",attrs:{placeholder:"请选择",clearable:!0},model:{value:l.status,callback:e=>{this.$set(l,"status",e)}}},[e("el-option",{key:"0",attrs:{label:"成功",value:"0"}}),e("el-option",{key:"1",attrs:{label:"失败",value:"1"}})])},{key:"method",label:"请求方法",labelWidth:"100px",render:(e,l)=>e("el-select",{style:"width:100%",attrs:{placeholder:"请选择",clearable:!0},model:{value:l.method,callback:e=>{this.$set(l,"method",e)}}},[e("el-option",{key:"GET",attrs:{label:"GET",value:"GET"}}),e("el-option",{key:"POST",attrs:{label:"POST",value:"POST"}}),e("el-option",{key:"DELETE",attrs:{label:"DELETE",value:"DELETE"}}),e("el-option",{key:"PUT",attrs:{label:"PUT",value:"PUT"}}),e("el-option",{key:"HEAD",attrs:{label:"HEAD",value:"HEAD"}})])},{key:"url",label:"请求地址",labelWidth:"100px"}]},rowActionButton(){return[{textValue:"详细",func:e=>{this.showDetail(e)}}]}},methods:{showDetail(e){this.$refs.LogDetail.show(e,this.allLogColumns)}}},c=b,d=t(1001),p=(0,d.Z)(c,a,s,!1,null,"b45a4566",null),m=p.exports}}]);
//# sourceMappingURL=460.dd173b15.js.map