{"version":3,"file":"js/460.dd173b15.js","mappings":"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","sources":["webpack://vue/./src/views/log/components/logDetail.vue","webpack://vue/src/views/log/components/logDetail.vue","webpack://vue/./src/views/log/components/logDetail.vue?cca2","webpack://vue/./src/views/log/components/logDetail.vue?549b","webpack://vue/./src/views/log/logData.vue","webpack://vue/./src/api/log.js","webpack://vue/src/views/log/logData.vue","webpack://vue/./src/views/log/logData.vue?6e24","webpack://vue/./src/views/log/logData.vue?46e7"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-dialog',{attrs:{\"title\":\"详细信息\",\"visible\":_vm.dialogVisible,\"width\":\"50%\",\"top\":\"10vh\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event},\"close\":_vm.close}},[_c('div',{staticClass:\"box\"},_vm._l((_vm.columns),function(item){return _c('div',{key:item.key,staticClass:\"item\"},[_c('div',{staticClass:\"label\"},[_vm._v(_vm._s(item.label)+\" :\")]),_c('div',{staticClass:\"content\"},[(_vm.useJsonViewer(item.key))?_c('json-viewer',{attrs:{\"value\":_vm._f(\"jsonParse\")(_vm.data[item.key]),\"expand-depth\":5,\"copyable\":\"\",\"boxed\":\"\"}}):_c('span',[_vm._v(_vm._s(_vm.data[item.key]))])],1)])}),0)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-dialog\n    title=\"详细信息\"\n    :visible.sync=\"dialogVisible\"\n    width=\"50%\"\n    top=\"10vh\"\n    @close=\"close\">\n    <div class=\"box\">\n      <div v-for=\"item in columns\" :key=\"item.key\" class=\"item\">\n        <div class=\"label\">{{ item.label }} :</div>\n        <div class=\"content\">\n          <json-viewer\n            v-if=\"useJsonViewer(item.key)\"\n            :value=\"data[item.key] | jsonParse\"\n            :expand-depth=\"5\"\n            copyable\n            boxed></json-viewer>\n          <span v-else>{{ data[item.key] }}</span>\n        </div>\n      </div>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nexport default {\n  name: 'LogDetail',\n  filters: {\n    jsonParse(val) {\n      return JSON.parse(val)\n    },\n  },\n  data() {\n    return {\n      dialogVisible: false,\n      columns: [],\n      data: {},\n    }\n  },\n  methods: {\n    show(data, columns) {\n      this.dialogVisible = true\n      this.data = data\n      columns.splice(0, 1)\n      this.columns = columns\n    },\n    useJsonViewer(key) {\n      return key == 'result' || key == 'query' || key == 'body'\n    },\n    close() {\n      this.data = {}\n      this.columns = []\n    },\n  },\n}\n</script>\n<style scoped lang=\"less\">\n.box {\n  max-height: 60vh;\n  overflow: scroll;\n  padding: 0 16px 0 0;\n}\n.item {\n  display: flex;\n  flex-direction: row;\n  padding: 16px 0;\n}\n.label {\n  width: 85px;\n  text-align: right;\n  margin-right: 8px;\n}\n.content {\n  flex: 1;\n}\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./logDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./logDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./logDetail.vue?vue&type=template&id=3f3288a2&scoped=true&\"\nimport script from \"./logDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./logDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./logDetail.vue?vue&type=style&index=0&id=3f3288a2&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3f3288a2\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"page\"},[_c('el-tabs',{model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"label\":\"登录日志\",\"name\":\"loginLog\"}},[(_vm.activeName === 'loginLog')?_c('TablePage',{ref:\"tablePage\",attrs:{\"columns\":_vm.columns,\"filters\":_vm.filters,\"options\":_vm.options}}):_vm._e()],1),_c('el-tab-pane',{attrs:{\"label\":\"全部日志\",\"name\":\"allLog\"}},[(_vm.activeName === 'allLog')?_c('TablePage',{ref:\"tablePage\",attrs:{\"columns\":_vm.allLogColumns,\"filters\":_vm.allLogFilters,\"options\":_vm.allLogOptions,\"rowActionButton\":_vm.rowActionButton}}):_vm._e()],1)],1),_c('LogDetail',{ref:\"LogDetail\"})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/utils/request'\nimport Setting from '@/utils/setting'\nexport function loginLog(params) {\n  return request({\n    url: Setting.api + '/loginfo/loginLog',\n    method: 'get',\n    params,\n  })\n}\nexport function allLog(params) {\n  return request({\n    url: Setting.api + '/loginfo/allLog',\n    method: 'get',\n    params,\n  })\n}\n","<template>\n  <div class=\"page\">\n    <el-tabs v-model=\"activeName\">\n      <el-tab-pane label=\"登录日志\" name=\"loginLog\">\n        <TablePage\n          v-if=\"activeName === 'loginLog'\"\n          ref=\"tablePage\"\n          :columns=\"columns\"\n          :filters=\"filters\"\n          :options=\"options\"></TablePage>\n      </el-tab-pane>\n      <el-tab-pane label=\"全部日志\" name=\"allLog\">\n        <TablePage\n          v-if=\"activeName === 'allLog'\"\n          ref=\"tablePage\"\n          :columns=\"allLogColumns\"\n          :filters=\"allLogFilters\"\n          :options=\"allLogOptions\"\n          :rowActionButton=\"rowActionButton\"></TablePage>\n      </el-tab-pane>\n    </el-tabs>\n    <LogDetail ref=\"LogDetail\"></LogDetail>\n  </div>\n</template>\n\n<script>\nimport { loginLog, allLog } from '@/api/log'\nimport LogDetail from './components/logDetail'\nexport default {\n  name: 'LogData',\n  components: {\n    LogDetail,\n  },\n  data() {\n    return {\n      activeName: 'loginLog',\n    }\n  },\n  computed: {\n    options() {\n      return {\n        apiFunc: loginLog,\n        hideActionBtn: true,\n      }\n    },\n    columns() {\n      return [\n        {\n          type: 'index',\n          label: '序号',\n          width: '50',\n        },\n        {\n          key: 'info_id',\n          label: '日志ID',\n        },\n        {\n          key: 'username',\n          label: '登录账号',\n        },\n        {\n          key: 'ip',\n          label: 'IP',\n        },\n        {\n          key: 'status',\n          label: '状态',\n          render: (h, params) => {\n            return <span>{params.row.status == 0 ? '成功' : '失败'}</span>\n          },\n        },\n        {\n          key: 'msg',\n          label: '详细信息',\n        },\n        {\n          key: 'login_time',\n          label: '登陆时间',\n        },\n      ]\n    },\n    filters() {\n      return [\n        {\n          key: 'username',\n          label: '账号',\n        },\n        {\n          key: 'ip',\n          label: 'IP',\n        },\n        {\n          key: 'status',\n          label: '状态',\n          render: (h, filterData) => {\n            return (\n              <el-select\n                style='width:100%'\n                v-model={filterData.status}\n                placeholder='请选择'\n                clearable>\n                <el-option key='0' label='成功' value='0'></el-option>\n                <el-option key='1' label='失败' value='1'></el-option>\n              </el-select>\n            )\n          },\n        },\n      ]\n    },\n    allLogOptions() {\n      return {\n        apiFunc: allLog,\n        // hideActionBtn: true,\n      }\n    },\n    allLogColumns() {\n      return [\n        {\n          type: 'index',\n          label: '序号',\n          width: '50',\n        },\n        {\n          key: 'oper_id',\n          label: '日志ID',\n        },\n        {\n          key: 'username',\n          label: '登录账号',\n        },\n        {\n          key: 'ip',\n          label: 'IP',\n        },\n        {\n          key: 'method',\n          label: '请求方法',\n        },\n        {\n          key: 'url',\n          label: '请求地址',\n        },\n        {\n          key: 'query',\n          label: 'query',\n        },\n        {\n          key: 'body',\n          label: 'body',\n        },\n        {\n          key: 'result',\n          label: '返回结果',\n        },\n        {\n          key: 'status',\n          label: '状态',\n          render: (h, params) => {\n            return <span>{params.row.status == 0 ? '成功' : '失败'}</span>\n          },\n        },\n        {\n          key: 'msg',\n          label: '详细信息',\n        },\n        {\n          key: 'use_time',\n          label: '耗时（ms）',\n        },\n        {\n          key: 'request_time',\n          label: '时间',\n        },\n      ]\n    },\n    allLogFilters() {\n      return [\n        {\n          key: 'username',\n          label: '账号',\n        },\n        {\n          key: 'ip',\n          label: 'IP',\n        },\n        {\n          key: 'status',\n          label: '状态',\n          render: (h, filterData) => {\n            return (\n              <el-select\n                style='width:100%'\n                v-model={filterData.status}\n                placeholder='请选择'\n                clearable>\n                <el-option key='0' label='成功' value='0'></el-option>\n                <el-option key='1' label='失败' value='1'></el-option>\n              </el-select>\n            )\n          },\n        },\n        {\n          key: 'method',\n          label: '请求方法',\n          labelWidth: '100px',\n          render: (h, filterData) => {\n            return (\n              <el-select\n                style='width:100%'\n                v-model={filterData.method}\n                placeholder='请选择'\n                clearable>\n                <el-option key='GET' label='GET' value='GET'></el-option>\n                <el-option key='POST' label='POST' value='POST'></el-option>\n                <el-option\n                  key='DELETE'\n                  label='DELETE'\n                  value='DELETE'></el-option>\n                <el-option key='PUT' label='PUT' value='PUT'></el-option>\n                <el-option key='HEAD' label='HEAD' value='HEAD'></el-option>\n              </el-select>\n            )\n          },\n        },\n        {\n          key: 'url',\n          label: '请求地址',\n          labelWidth: '100px',\n        },\n      ]\n    },\n    rowActionButton() {\n      return [\n        {\n          textValue: '详细',\n          func: (row) => {\n            this.showDetail(row)\n          },\n        },\n      ]\n    },\n  },\n  methods: {\n    showDetail(row) {\n      this.$refs.LogDetail.show(row, this.allLogColumns)\n    },\n  },\n}\n</script>\n<style scoped lang=\"less\">\n.page {\n  padding: 16px;\n  height: 100%;\n  box-sizing: border-box;\n}\n.el-tab-pane,\n.el-tabs {\n  height: 100%;\n  position: relative;\n}\n/deep/.el-tabs__content {\n  height: ~'calc(100% - 55px)';\n}\n</style>\n<style>\n.el-tooltip__popper {\n  max-width: 50%;\n  max-height: 500px;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./logData.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./logData.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./logData.vue?vue&type=template&id=b45a4566&scoped=true&\"\nimport script from \"./logData.vue?vue&type=script&lang=js&\"\nexport * from \"./logData.vue?vue&type=script&lang=js&\"\nimport style0 from \"./logData.vue?vue&type=style&index=0&id=b45a4566&prod&scoped=true&lang=less&\"\nimport style1 from \"./logData.vue?vue&type=style&index=1&id=b45a4566&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b45a4566\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","dialogVisible","on","$event","close","staticClass","_l","columns","item","key","_v","_s","label","useJsonViewer","_f","data","staticRenderFns","name","filters","jsonParse","val","JSON","parse","methods","show","splice","component","model","value","activeName","callback","$$v","expression","ref","options","_e","allLogColumns","allLogFilters","allLogOptions","rowActionButton","loginLog","params","request","url","Setting","api","method","allLog","components","LogDetail","computed","apiFunc","hideActionBtn","$createElement","type","width","h","row","status","filterData","$set","labelWidth","textValue","func","showDetail","$refs"],"sourceRoot":""}