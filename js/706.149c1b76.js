"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[706,353,812],{9353:function(e,t,s){s.r(t),s.d(t,{default:function(){return d}});var l=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"新增用户",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[t("el-form",{ref:"userInfo",attrs:{"label-width":"80px",model:e.userInfo,rules:e.userInfoRule}},[t("el-form-item",{attrs:{label:"组织"}},[t("el-cascader",{staticStyle:{width:"100%"},attrs:{"show-all-levels":!1,props:e.defaultProps,options:e.deptTree,clearable:"",filterable:""},model:{value:e.userInfo.deptId,callback:function(t){e.$set(e.userInfo,"deptId",t)},expression:"userInfo.deptId"}})],1),t("el-form-item",{attrs:{label:"账号",prop:"username"}},[t("el-input",{model:{value:e.userInfo.username,callback:function(t){e.$set(e.userInfo,"username",t)},expression:"userInfo.username"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{model:{value:e.userInfo.password,callback:function(t){e.$set(e.userInfo,"password",t)},expression:"userInfo.password"}})],1),t("el-form-item",{attrs:{label:"名称",prop:"nickname"}},[t("el-input",{model:{value:e.userInfo.nickname,callback:function(t){e.$set(e.userInfo,"nickname",t)},expression:"userInfo.nickname"}})],1),t("el-form-item",{attrs:{label:"性别"}},[t("el-select",{staticStyle:{width:"100%"},model:{value:e.userInfo.sex,callback:function(t){e.$set(e.userInfo,"sex",t)},expression:"userInfo.sex"}},[t("el-option",{attrs:{label:"男",value:"0"}}),t("el-option",{attrs:{label:"女",value:"1"}})],1)],1),t("el-form-item",{attrs:{label:"邮箱"}},[t("el-input",{model:{value:e.userInfo.email,callback:function(t){e.$set(e.userInfo,"email",t)},expression:"userInfo.email"}})],1),t("el-form-item",{attrs:{label:"手机"}},[t("el-input",{model:{value:e.userInfo.phone,callback:function(t){e.$set(e.userInfo,"phone",t)},expression:"userInfo.phone"}})],1),t("el-form-item",{attrs:{label:"备注",prop:"remark"}},[t("el-input",{model:{value:e.userInfo.remark,callback:function(t){e.$set(e.userInfo,"remark",t)},expression:"userInfo.remark"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)},a=[],r=s(2900),n={name:"AddUser",data(){return{dialogVisible:!1,userInfo:{deptId:"",username:"",password:"",nickname:"",sex:"",email:"",phone:"",remark:""},defaultProps:{label:"deptName",children:"children",value:"deptId",emitPath:!1,checkStrictly:!0},userInfoRule:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],remark:[{max:500,message:"请输入备注",trigger:"blur"}]},deptTree:null}},mounted(){this.getDeptTree()},methods:{show(){this.dialogVisible=!0},getDeptTree(){(0,r.x7)().then((e=>{this.deptTree=e.data}))},submit(){this.$refs.userInfo.validate((e=>{if(!e)return!1;(0,r.cn)(this.userInfo).then((()=>{this.$message.success("添加成功"),this.dialogVisible=!1,this.$emit("refresh")}))}))},close(){this.userInfo={deptId:"",username:"",password:"",nickname:"",sex:"",email:"",phone:"",remark:""}}}},o=n,i=s(1001),u=(0,i.Z)(o,l,a,!1,null,"b61c44ec",null),d=u.exports},3812:function(e,t,s){s.r(t),s.d(t,{default:function(){return c}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page"},[t("div",{staticClass:"tree-box"},[t("el-tree",{attrs:{data:e.tree,"node-key":"deptId","default-expand-all":"","expand-on-click-node":!1,props:e.defaultProps},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function({data:e}){return t("span",{staticClass:"tree-line"},[t("span",{staticClass:"iconStr"},[t("TextTooltip",{attrs:{content:e.deptName}})],1)])}}])})],1),t("div",{staticClass:"table"},[t("TablePage",{ref:"tablePage",attrs:{columns:e.columns,filters:e.filters,options:e.options},scopedSlots:e._u([{key:"filterCondition",fn:function(){return[t("div",[t("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v(" 新增用户 ")])],1)]},proxy:!0}])})],1),t("AddUser",{ref:"addUser",on:{refresh:function(t){return e.$refs.tablePage.getList()}}})],1)},a=[],r=s(2900),n=s(9353),o={name:"DepartManage",components:{AddUser:n["default"]},data(){return{tree:null,defaultProps:{label:"deptName",children:"children"},deptId:""}},computed:{options(){return{apiFunc:r.tM,hideActionBtn:!0,filter:{deptId:this.deptId}}},columns(){return[{key:"userId",label:"用户ID"},{key:"username",label:"账号"},{key:"nickname",label:"昵称"},{key:"deptName",label:"部门"},{key:"phone",label:"手机"},{key:"email",label:"邮箱"},{key:"status",label:"状态",render:(e,t)=>e("el-switch",{props:{activeColor:"#13ce66",inactiveColor:"#ff4949",value:0==t.row.status},on:{change:e=>{this.changeStatus(t.row,e)}}})}]},filters(){this.$createElement;return[{key:"username",label:"账号"},{key:"nickname",label:"昵称"},{key:"phone",label:"手机"},{key:"email",label:"邮箱"},{key:"status",label:"状态",render:(e,t)=>e("el-select",{attrs:{placeholder:"请选择",clearable:!0},model:{value:t.status,callback:e=>{this.$set(t,"status",e)}}},[e("el-option",{key:"0",attrs:{label:"启用",value:"0"}}),e("el-option",{key:"1",attrs:{label:"禁用",value:"1"}})])}]}},created(){this.getDeptTree()},methods:{getDeptTree(){(0,r.x7)().then((e=>{this.tree=e.data}))},handleNodeClick(e){this.deptId=e.deptId,this.$nextTick((()=>{this.$refs.tablePage?.getList()}))},changeStatus(e,t){const s={userId:e.userId,status:t?0:1};(0,r.wv)(s).then((()=>{this.$refs.tablePage.getList()}))},addUser(){this.$refs.addUser.show()}}},i=o,u=s(1001),d=(0,u.Z)(i,l,a,!1,null,"060a3aab",null),c=d.exports},706:function(e,t,s){s.r(t);var l=s(3812);t["default"]=l["default"]}}]);
//# sourceMappingURL=706.149c1b76.js.map