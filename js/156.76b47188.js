"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[156],{7156:function(e,t,r){r.r(t),r.d(t,{default:function(){return m}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"MenuForm"},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"名称",prop:"menuName"}},[t("el-input",{model:{value:e.ruleForm.menuName,callback:function(t){e.$set(e.ruleForm,"menuName",t)},expression:"ruleForm.menuName"}})],1),t("el-form-item",{attrs:{label:"父菜单",prop:"parentId"}},[t("el-cascader",{staticStyle:{width:"100%"},attrs:{"show-all-levels":!1,props:e.defaultProps,options:e.menuTree,clearable:"",filterable:""},model:{value:e.ruleForm.parentId,callback:function(t){e.$set(e.ruleForm,"parentId",t)},expression:"ruleForm.parentId"}})],1),t("el-form-item",{attrs:{label:"显示顺序",prop:"orderNum"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{disabled:"",controls:!1},model:{value:e.ruleForm.orderNum,callback:function(t){e.$set(e.ruleForm,"orderNum",t)},expression:"ruleForm.orderNum"}})],1),t("el-form-item",{attrs:{label:"菜单类型",prop:"menuType"}},[t("el-select",{staticStyle:{width:"100%"},model:{value:e.ruleForm.menuType,callback:function(t){e.$set(e.ruleForm,"menuType",t)},expression:"ruleForm.menuType"}},[t("el-option",{attrs:{disabled:"M"!=e.parentType,label:"菜单",value:"M"}}),t("el-option",{attrs:{disabled:"C"==e.parentType,label:"非菜单",value:"C"}}),t("el-option",{attrs:{label:"权限",value:"F",disabled:"C"!=e.parentType}})],1)],1),t("el-form-item",{attrs:{label:"路由地址",prop:"path"}},[t("el-input",{model:{value:e.ruleForm.path,callback:function(t){e.$set(e.ruleForm,"path",t)},expression:"ruleForm.path"}})],1),t("el-form-item",{attrs:{label:"组件路径",prop:"component"}},[t("el-input",{model:{value:e.ruleForm.component,callback:function(t){e.$set(e.ruleForm,"component",t)},expression:"ruleForm.component"}})],1),t("el-form-item",{attrs:{label:"组件参数",prop:"query"}},[t("el-input",{model:{value:e.ruleForm.query,callback:function(t){e.$set(e.ruleForm,"query",t)},expression:"ruleForm.query"}})],1),t("el-form-item",{attrs:{label:"图标",prop:"icon"}},[t("IconChooser",{model:{value:e.ruleForm.icon,callback:function(t){e.$set(e.ruleForm,"icon",t)},expression:"ruleForm.icon"}})],1),t("div",{staticClass:"MenuForm-switch"},[t("el-form-item",{attrs:{label:"外链",prop:"isFrame"}},[t("el-switch",{attrs:{"active-value":0,"inactive-value":1,"active-text":"是","inactive-text":"否"},model:{value:e.ruleForm.isFrame,callback:function(t){e.$set(e.ruleForm,"isFrame",t)},expression:"ruleForm.isFrame"}})],1),t("el-form-item",{attrs:{label:"是否缓存",prop:"isCache"}},[t("el-switch",{attrs:{"active-value":0,"inactive-value":1,"active-text":"是","inactive-text":"否"},model:{value:e.ruleForm.isCache,callback:function(t){e.$set(e.ruleForm,"isCache",t)},expression:"ruleForm.isCache"}})],1)],1),t("div",{staticClass:"MenuForm-switch"},[t("el-form-item",{attrs:{label:"菜单状态",prop:"status"}},[t("el-switch",{attrs:{"active-value":0,"inactive-value":1,"active-text":"启用","inactive-text":"停用"},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}})],1),t("el-form-item",{attrs:{label:"菜单显隐",prop:"visible"}},[t("el-switch",{attrs:{"active-value":0,"inactive-value":1,"active-text":"显示","inactive-text":"隐藏"},model:{value:e.ruleForm.visible,callback:function(t){e.$set(e.ruleForm,"visible",t)},expression:"ruleForm.visible"}})],1)],1)],1),t("div",{staticClass:"MenuForm-action"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v(" 保存 ")]),t("el-button",{on:{click:function(t){return e.$emit("close")}}},[e._v("取消")])],1)],1)},a=[],u=r(7981),n={name:"MenuForm",props:{menuTree:{type:Array,default:()=>[]}},data(){return{ruleForm:{menuName:"",orderNum:null,menuType:"",path:"",parentId:"0",component:"",query:"",icon:"el-icon-menu",isFrame:1,isCache:0,status:0,visible:0},defaultProps:{label:"menuName",children:"children",value:"menuId",emitPath:!1,checkStrictly:!0},parentType:""}},computed:{rules(){const e=(e,t,r)=>{""===t?r(new Error("请输入路由地址")):r()},t=(e,t,r)=>{""===t?r(new Error("请输入组件地址")):r()},r={menuName:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],menuType:[{required:!0,message:"请选择菜单类型",trigger:"blur"}],path:[{required:!0,validator:e,trigger:"blur"}]};return"C"==this.ruleForm.menuType?r.component=[{required:!0,validator:t,trigger:"blur"}]:delete r.component,r}},methods:{resetForm(e){this.$refs[e].resetFields(),this.$emit("close")},submitForm(e){this.$refs[e].validate((e=>{e&&(0,u.bL)({...this.ruleForm}).then((()=>{this.$emit("reload"),this.$emit("close")}))}))},addMenu(e,t){const r=e.menuId;this.parentType=e.menuType,this.initData(),this.$nextTick((()=>{this.$set(this.ruleForm,"parentId",r),this.$set(this.ruleForm,"orderNum",t)}))},editMenu(e){this.initData(),(0,u.D7)(e).then((e=>{this.ruleForm=e.data}))},initData(){this.ruleForm={menuName:"",orderNum:null,menuType:"",path:"",parentId:"0",component:"",query:"",icon:"el-icon-menu",isFrame:1,isCache:0,status:0,visible:0},this.$nextTick((()=>{this.$refs["ruleForm"].resetFields()}))}}},i=n,o=r(1001),s=(0,o.Z)(i,l,a,!1,null,"02592a8d",null),m=s.exports},7981:function(e,t,r){r.d(t,{AB:function(){return m},D7:function(){return s},RD:function(){return i},Th:function(){return o},bL:function(){return n}});var l=r(4471),a=r(7873),u=r(7321);function n(e){return(0,l.Z)({url:a.Z.api+"/menus/addMenu",method:"POST",data:e})}function i(e){return(0,l.Z)({url:a.Z.api+"/menus/deleteMenu",method:"delete",params:e})}function o(){return(0,l.Z)({url:a.Z.api+"/menus/getMenuTree",method:"get"}).then((e=>(u.Z.dispatch("user/getMenuData"),e)))}function s(e){return(0,l.Z)({url:a.Z.api+"/menus/getMenuInfo/"+e,method:"get"})}function m(e,t){return(0,l.Z)({url:a.Z.api+"/menus/sortMenu?parentId="+e,method:"POST",data:t}).then((e=>(u.Z.dispatch("user/getMenuData"),e)))}}}]);
//# sourceMappingURL=156.76b47188.js.map